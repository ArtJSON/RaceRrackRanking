<% layout('layouts/boilerplate') %>
<div class="min-full-screen">
  <div class="form-wrapper-md">
    <form
      action="/racetracks/<%= racetrack.id %>/photos"
      method="POST"
      novalidate
      class="form"
      enctype="multipart/form-data"
    >
      <h1 class="form-title">Add new photos to <%= racetrack.name %></h1>
      <div class="form-group">
        <label class="form-label" for="img">Enter the images: </label>
        <input
          class="form-control"
          type="file"
          id="img"
          name="img"
          required
          multiple
        />
      </div>
      <div class="form-group">
        <button class="btn btn-primary-green">Add photos</button>
      </div>
    </form>
  </div>

  <div class="form-wrapper-md">
    <form
      action="/racetracks/<%= racetrack.id %>/photos?_method=DELETE"
      method="POST"
      novalidate
      class="form"
    >
      <h1 class="form-title">Or delete existing photos:</h1>
      <div class="form-group">
        <div class="row row-cols-1 row-cols-md-2 g-4">
          <% for(let img of racetrack.img) { %>
          <div class="col">
            <div class="card h-100">
              <img src="<%= img.thumbnail %>" class="card-img-top" />
              <div class="card-body">
                <input
                  class="form-check-input"
                  type="checkbox"
                  value="<%= img.filename %>"
                  name="imageNames[]"
                  id="<%= img.filename %>"
                />
                <label class="form-check-label" for="<%= img.filename %>">
                  Delete
                </label>
              </div>
            </div>
          </div>
          <% } %>
        </div>
      </div>
      <div class="form-group">
        <button class="btn btn-primary-green">Remove photos</button>
        <a class="btn btn-red" href="/racetracks/<%= racetrack.id %>"
          >Quit editing</a
        >
      </div>
    </form>
  </div>
</div>
